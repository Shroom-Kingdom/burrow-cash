(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{5062:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/staking",function(){return t(5601)}])},5601:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return oe}});var i=t(828),r=t(5893),o=t(7294),a=t(9144),s=t(9630),l=t(120),c=t(6042),d=t(1953),u=t(4099),m=t(2741),x=t(6410),h=t(3052),f=function(e){var n=e.color,t=void 0===n?"#594A42":n,i=e.width,o=void 0===i?48:i,a=e.height,s=void 0===a?48:a;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:o,height:s},viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M24 0C10.733 0 0 10.733 0 24c0 9.667 5.733 18 14 21.8-2.733-4.467-7.667-13.733-7.267-22 .4-9.4 7.334-14.2 13.6-15.533C26.733 6.933 35 7.6 37.067 13.933c2.4 7.4-9.467 11.8-10 12-.6.2-6.134 2.267-9.334.8a4.175 4.175 0 0 1-2.133-2.266c-.533-1.4-.2-2.934.867-4.2 2.6-3.134 9.266-4.534 16.2-3.4-.467 1-1.6 2-2.934 2.866-5.666-.4-9.666 1.134-10.866 2.6-.467.6-.334.934-.334 1.067.067.133.134.333.467.467 1.6.733 5.333-.267 6.933-.867.134-.067 9.534-3.6 8.067-8.067-1.533-4.666-8.933-4.466-13.067-3.6-2.466.534-10.666 3-11.133 12.6-.267 7.4 5.6 18.134 8.8 23.467 1.733.4 3.533.6 5.4.6 13.267 0 24-10.733 24-24S37.267 0 24 0Zm16.467 30.2c-3.934 6-10.134 7.6-15.334 7.6-3.2 0-6-.533-7.866-1.067-.867-.2-1.334-1.066-1.134-1.933.2-.867 1.067-1.333 1.934-1.133 12.2 3.133 17.6-1.934 19.8-5.2.866-1.334 1.2-2.867.866-4.2-.333-1.267-1.066-2.267-2.266-3 .733-.8 1.266-1.734 1.666-2.667 2.267 1.4 3.267 3.333 3.667 5 .467 2.2 0 4.6-1.333 6.6Z",fill:t})})},g=function(e){var n=e.children,t=e.sx,i=void 0===t?{}:t;return(0,r.jsx)(s.Z,{sx:(0,c.Z)({fontWeight:"semibold",fontSize:"0.65rem",background:"#9b8579",color:"#fff",py:"0.5rem",px:"0.8rem",borderRadius:100},i),children:n})},p=function(e){var n=e.value,t=e.color,i=void 0===t?"#9b8579":t,o=e.label,l=e.buttonLabel,c=e.onClick,d=e.isDisabled,m=void 0!==d&&d,x=e.isLoading,h=void 0!==x&&x;return(0,r.jsxs)(a.Z,{spacing:2,sx:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",p:"1.5rem",minWidth:"200px",alignItems:"center",borderRadius:"0.5rem"},children:[(0,r.jsx)(f,{color:i,width:40,height:40}),(0,r.jsx)(s.Z,{fontSize:"1.2rem",fontWeight:"semibold",color:i,children:n}),(0,r.jsx)(s.Z,{fontSize:"0.65rem",color:"#767676",children:o}),(0,r.jsx)(u.Z,{size:"small",variant:"contained",onClick:c,sx:{minWidth:130},disabled:m,loading:h,children:l})]})},j=function(e){var n=e.addAmount,t=void 0===n?0:n,i=(0,x.C)(h.zq).brrr,a=i.unclaimedAmount,s=void 0===a?0:a,l=i.dailyAmount,c=void 0===l?0:l,d=(0,o.useState)(s),u=d[0],f=d[1],g=c/24/3600/10;return(0,o.useLayoutEffect)((function(){f(s);var e=setInterval((function(){return f((function(e){return e+g}))}),60);return function(){return clearInterval(e)}}),[s]),(0,r.jsx)("span",{children:(t+u).toLocaleString(void 0,m.yA)})},v=function(e){var n=e.sx,t=void 0===n?{}:n;return(0,r.jsx)(d.Z,{flex:1,mx:1,height:"1px",bgcolor:"rgba(0, 0, 0, 0.01)",border:"0.5px dashed rgba(0, 0, 0, 0.1)",sx:t})},b=t(8697),Z=t(3409),y=(0,b.P1)((function(e){return e.assets}),(function(e){return e.account}),(function(e){return e.app}),(function(e,n,t){var i,r=t.config.booster_token_id;if(!n.accountId||!e.data[r])return[0,0];var o=n.portfolio.farms,a=e.data[r].metadata.decimals,s=Object.keys(o.supplied).map((function(e){var n,t;return(null===(n=o.supplied[e])||void 0===n||null===(t=n[r])||void 0===t?void 0:t.unclaimed_amount)||"0"})).map((function(e){return Number((0,m.C4)(e,a))})).reduce(Z.Jd,0),l=Object.keys(o.borrowed).map((function(e){var n,t;return(null===(n=o.borrowed[e])||void 0===n||null===(t=n[r])||void 0===t?void 0:t.unclaimed_amount)||"0"})).map((function(e){return Number((0,m.C4)(e,a))})).reduce(Z.Jd,0);return[Number((0,m.C4)((null===(i=n.portfolio.supplied[r])||void 0===i?void 0:i.balance)||"0",a)),s+l]})),w=t(9396),C=t(1136),S=t(689),k=t(9086);function A(){var e=(0,x.C)(C.N),n=(0,x.T)(),t=(0,x.C)((0,k.SL)({isStaking:!0})),i=(0,x.C)((0,k.j8)({isStaking:!0}));return(0,w.Z)((0,c.Z)({},e),{setAmount:function(e){n((0,S.jP)({amount:e}))},setMonths:function(e){n((0,S.jP)({months:e}))},stakingNetAPY:t,stakingNetTvlAPY:i})}var _=t(8214),I=t(328),R=t(7568),L=t(655),z=t(8847),N=t(6541),W=t(7667);function M(){return(M=(0,R.Z)((function(){var e,n;return(0,L.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,z.dS)()];case 1:return e=t.sent().logicContract,(n=[]).push({receiverId:e.contractId,functionCalls:[{methodName:N.Y[N.Y.account_unstake_booster],args:{receiver_id:e.contractId}}]}),[4,(0,W.dj)(n)];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}var P=t(7660),T=t(9703),Y=t(3450),E=t.n(Y),B=t(6635),D=t(1353),F=t(5201);function O(){return(O=(0,R.Z)((function(e){var n,t,i,r,o,a,s;return(0,L.__generator)(this,(function(l){switch(l.label){case 0:return n=e.amount,t=e.months,[4,(0,z.dS)()];case 1:return i=l.sent(),r=i.logicContract,o=i.config,a=[],s=12===t?o.maximum_staking_duration_sec:t*o.minimum_staking_duration_sec,a.push({receiverId:r.contractId,functionCalls:[{methodName:N.Y[N.Y.account_stake_booster],args:{receiver_id:r.contractId,amount:(0,F.UQ)(n,o.booster_decimals),duration:s}}]}),[4,(0,W.dj)(a)];case 2:return l.sent(),[2]}}))}))).apply(this,arguments)}var U=t(5010),q=Array.from(new Array(12)).map((function(e,n){return{value:n+1,label:0===n||11===n?n+1:""}}));function H(e){return"".concat(e,"%")}var J=function(e){var n=e.value,t=void 0===n?1:n,i=e.onChange;return(0,r.jsx)(U.w,{"aria-label":"Month amount slider",getAriaValueText:H,valueLabelDisplay:"auto",value:t,defaultChecked:!0,step:1,min:1,max:12,valueLabelFormat:function(e){return E()("Month",e,!0)},marks:q,onChange:i})},X=t(3753),Q=t(6706),V=t(677),$=t(6385),G=t(6470),K=t(2556),ee=function(){var e=(0,G.tb)(),n=e.extra,t=e.net;return(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(s.Z,{fontSize:"0.8rem",color:"gray",mt:1,children:"Net Liquidity Rewards"}),(0,r.jsx)(d.Z,{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:1.5,mt:1,mb:3,children:t.map((function(e){var n=(0,i.Z)(e,2),t=n[0],o=n[1];return(0,r.jsx)(ne,(0,c.Z)({},o),t)}))}),(0,r.jsx)(s.Z,{fontSize:"0.8rem",color:"gray",children:"Asset Rewards"}),(0,r.jsx)(d.Z,{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:1.5,mt:1,children:n.map((function(e){var n=(0,i.Z)(e,2),t=n[0],o=n[1];return(0,r.jsx)(ne,(0,c.Z)({},o),t)}))})]})},ne=function(e){var n=e.icon,t=e.dailyAmount,i=e.symbol,o=e.multiplier,l=e.newDailyAmount;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{direction:"row",gap:1.5,alignItems:"center",children:[(0,r.jsx)(K.Z,{width:24,height:24,icon:n}),(0,r.jsx)(s.Z,{fontSize:"0.75rem",textAlign:"left",children:i})]}),(0,r.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(v,{sx:{position:"relative",top:"10px",mx:"20px"}}),(0,r.jsxs)(s.Z,{position:"relative",fontSize:"0.75rem",textAlign:"right",fontWeight:"bold",alignItems:"center",children:[l.toLocaleString(void 0,$.yA)," \ud83d\udcb0",(0,r.jsx)(te,{daily:t,multiplier:o})]})]})]})},te=function(e){var n=e.daily,t=e.multiplier;return(0,r.jsx)(Q.Z,{title:(0,r.jsxs)(a.Z,{width:"140px",spacing:.5,children:[(0,r.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(s.Z,{fontSize:"0.625rem",children:"Current daily"}),(0,r.jsx)(s.Z,{fontSize:"0.625rem",fontWeight:"medium",children:n.toLocaleString(void 0,$.yA)})]}),(0,r.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(s.Z,{fontSize:"0.625rem",children:"Multiplier"}),(0,r.jsx)(s.Z,{fontSize:"0.625rem",fontWeight:"medium",children:t.toLocaleString(void 0,$.yA)})]})]}),placement:"right",arrow:!0,children:(0,r.jsx)(d.Z,{component:"span",children:(0,r.jsx)(V.e,{style:{marginLeft:"3px",color:"#909090",position:"relative",top:"2px"}})})})},ie=function(e){var n=e.open,t=e.onClose,c=(0,i.Z)((0,x.C)(y),1)[0],h=(0,o.useState)(!1),g=h[0],p=h[1],j=A(),b=j.stakingTimestamp,Z=j.amount,w=j.months,C=j.setAmount,S=j.setMonths,k=j.stakingNetAPY,_=j.stakingNetTvlAPY,R=l.ou.fromMillis(b/1e6),L=b?Math.round(R.diffNow().as("months")):w,z=Z>c,N=w<L,W=!Z||z||N,M="".concat(Z).replace(/[^0-9.-]/g,"").replace(/(?!^)-/g,"").replace(/^0+(\d)/gm,"$1"),Y=Math.round(100*Z/c)||0;return(0,o.useEffect)((function(){S(L)}),[b]),(0,r.jsx)(P.Z,{open:n,onClose:t,children:(0,r.jsx)(a.Z,{direction:"column",sx:{position:"relative",background:"white",mx:"auto",borderRadius:[0,"0.5rem"],height:["100%","80vh"],top:"calc(50% - 40vh)",maxHeight:"620px",maxWidth:440},children:(0,r.jsxs)(a.Z,{sx:{overflowY:"auto",p:["1.2rem","2rem"]},direction:"column",spacing:2,children:[(0,r.jsxs)(a.Z,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,r.jsx)(f,{color:"#594a42",width:40,height:40}),(0,r.jsx)(s.Z,{color:"#232323",fontWeight:"semibold",fontSize:"1.125rem",children:"Stake BRRR"}),(0,r.jsx)(D.PZ,{onClose:t})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",color:"#909090",fontSize:"0.75rem",fontWeight:"medium"},children:[(0,r.jsx)("span",{children:"Amount"}),(0,r.jsxs)("span",{children:["Available: ",c.toLocaleString(void 0,m.yA)]})]}),(0,r.jsx)(B.II,{value:M,type:"number",step:"0.01",onClickMax:function(){(0,I.UN)({total:c}),C(c)},onChange:function(e){C(Number(e.target.value))},onFocus:function(e){e.target.select()}}),(0,r.jsx)(d.Z,{px:"1.5rem",my:"1rem",children:(0,r.jsx)(X.Z,{value:Y,onChange:function(e){var n=e.target.value;C(Number(c)*n/100)}})})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(s.Z,{sx:{color:"#909090",fontSize:"0.75rem",fontWeight:"medium"},children:"Duration"}),(0,r.jsx)(B.II,{value:E()("month",w,!0),readOnly:!0,onClickMax:function(){return S(12)}}),(0,r.jsx)(d.Z,{px:"1.5rem",my:"1rem",children:(0,r.jsx)(J,{value:w,onChange:function(e){S(e.target.value)}})})]}),(0,r.jsxs)(a.Z,{spacing:1,sx:{borderRadius:1,boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.1)",fontWeight:"medium",p:"1.5rem",px:"1.2rem"},children:[(0,r.jsx)(s.Z,{sx:{color:"#232323",fontSize:"1rem"},children:"Reward details"}),(0,r.jsxs)(d.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(s.Z,{color:"#909090",fontWeight:500,fontSize:"0.75rem",children:"Pools APY"}),(0,r.jsx)(v,{}),(0,r.jsxs)(s.Z,{color:"#46C285",fontWeight:700,fontSize:"0.75rem",bgcolor:"rgba(71, 200, 128, 0.24)",borderRadius:1,px:"8px",py:"4px",children:[k.toLocaleString(void 0,m.Ii),"%"]})]}),(0,r.jsxs)(d.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(s.Z,{color:"#909090",fontWeight:500,fontSize:"0.75rem",children:"Net Liquidity APY"}),(0,r.jsx)(v,{}),(0,r.jsxs)(s.Z,{color:"#46C285",fontWeight:700,fontSize:"0.75rem",bgcolor:"rgba(71, 200, 128, 0.24)",borderRadius:1,px:"8px",py:"4px",children:[_.toLocaleString(void 0,m.Ii),"%"]})]}),(0,r.jsx)(ee,{})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[z&&(0,r.jsx)(T.Z,{severity:"error",children:"Amount must be lower than total BRRR earned"}),N&&(0,r.jsx)(T.Z,{severity:"error",children:"The new staking duration is shorter than the current remaining staking duration"})]}),(0,r.jsx)(u.Z,{disabled:W,variant:"contained",onClick:function(){(0,I.pp)({amount:Z,months:w,percent:Z/c*100}),function(e){O.apply(this,arguments)}({amount:Z,months:w}),p(!0),C(0)},loading:g,children:"Confirm"}),(0,r.jsx)(d.Z,{bgcolor:"#fff8ba",py:1,borderRadius:"4px",width:"80%",alignSelf:"center",children:(0,r.jsx)(s.Z,{fontSize:"0.625rem",textAlign:"center",color:"#404040",fontWeight:"medium",children:"Staking duration applies to previously staked BRRR as well."})})]})})})},re=function(){var e=(0,i.Z)((0,x.C)(y),1)[0],n=A(),t=n.BRRR,c=n.stakingTimestamp,d=(0,_.g)("staking"),u=d.handleClaimAll,h=d.isLoading,v=(0,o.useState)(!1),b=v[0],Z=v[1],w=(0,o.useState)(!1),C=w[0],S=w[1],k=l.ou.fromMillis(c/1e6),R=l.ou.now()<k;return(0,r.jsxs)(a.Z,{alignItems:"center",mt:"2rem",spacing:"2rem",sx:{px:["0rem","2rem"],mx:"auto",mb:"2rem"},children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(f,{}),(0,r.jsxs)(s.Z,{fontWeight:"semibold",fontSize:{xs:"1.5rem",sm:"2rem"},color:"#232323",children:[(0,r.jsx)(j,{addAmount:e})," BRRR"]})]}),(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(g,{children:"Staked"}),(0,r.jsx)(g,{sx:{background:"#594a42"},children:"Available"}),(0,r.jsx)(g,{sx:{background:"#47c285"},children:"Unclaimed"})]}),(0,r.jsxs)(a.Z,{spacing:2,direction:{xs:"column-reverse",sm:"row"},sx:{justifyContent:"center",alignItems:"center",width:"100%"},children:[(0,r.jsx)(p,{value:t.toLocaleString(void 0,m.yA),label:"Staked until ".concat(k.toFormat("yyyy-MM-dd / HH:mm")),buttonLabel:"Unstake",isDisabled:R,isLoading:b,onClick:function(){(0,I.Fs)(),function(){M.apply(this,arguments)}(),Z(!0)}}),(0,r.jsx)(p,{value:e.toLocaleString(void 0,m.yA),label:"Available to stake",color:"#594a42",buttonLabel:"Stake",onClick:S}),(0,r.jsx)(p,{value:(0,r.jsx)(j,{}),label:"Unclaimed rewards",color:"#47c285",buttonLabel:"Claim",onClick:u,isLoading:h})]}),(0,r.jsx)(ie,{open:C,onClose:function(){return S(!1)}})]})},oe=re}},function(e){e.O(0,[131,774,888,179],(function(){return n=5062,e(e.s=n);var n}));var n=e.O();_N_E=n}]);